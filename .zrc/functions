# DEFINE FUNCTIONS

# combines content search via ag and file search via fd
combine_search(){
	printf "$(fd -Ht f -c 'never' $1)\n$(ag -il --nocolor $1 ./)\n" | sort -u
}

# pipe combine_search's output into fzf
search(){
	combine_search $1 | fzf
}

# open search-result in vim
vim_search(){
	vim $(search $1)
}

# cd to parent directory of search-result
cd_search(){
	cd $(dirname $(search $1))
}

# open search-result in less
less_search(){
	less -S $(search $1)
}

# search through contents of file with fzf
content_search(){
	cat -n $1 | fzf --tac
	# --tac: fzf reverses the input, which in this case if from cat (cat â†’ tac, eh?)
}

# as above, but match exactly
content_search_exact(){
	cat -n $1 | fzf --exact --tac
}

# select a file and search through its contents using the above functions
select_and_search(){
	content_search_exact $(search $1)
}
